<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>UniCard NID - Smart National ID Generator</title>
    <meta name="description" content="Generate realistic Bangladeshi Smart NID Cards. Features front/back generation, auto-MRZ, and high-resolution download.">
    <meta name="author" content="DrKingBD">
    <link rel="canonical" href="https://kingcc.web.app/nid">
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@300;400;500;600;700&family=Roboto:wght@400;500;700&family=Share+Tech+Mono&family=OCR-B&display=swap');

        body { font-family: 'Roboto', sans-serif; }
        .font-bn { font-family: 'Hind Siliguri', sans-serif; }
        /* OCR-B is the standard font for MRZ */
        .font-mrz { font-family: 'Share Tech Mono', monospace; letter-spacing: 1px; font-weight: 500; }

        /* --- Card Container --- */
        .nid-card {
            width: 460px;
            height: 290px;
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
            background-color: #f0fdf4; /* Very light green base */
            border: 1px solid #dcfce7;
        }

        /* --- Background Layers --- */
        /* 1. Wavy Pattern */
        .nid-bg-waves {
            position: absolute;
            inset: 0;
            background-image: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(34, 197, 94, 0.05) 10px,
                rgba(34, 197, 94, 0.05) 20px
            );
            z-index: 0;
        }
        
        /* 2. Guilloche Simulation (Curves) */
        .nid-guilloche {
            position: absolute;
            inset: 0;
            background: 
                radial-gradient(circle at 0% 0%, transparent 40%, rgba(22, 163, 74, 0.08) 41%, transparent 42%),
                radial-gradient(circle at 100% 100%, transparent 40%, rgba(22, 163, 74, 0.08) 41%, transparent 42%),
                radial-gradient(circle at 50% 50%, rgba(220, 38, 38, 0.03) 0%, transparent 60%); /* Subtle red center */
            z-index: 1;
        }

        /* 3. Red Sun / Map Background */
        .bg-sun-red {
            position: absolute;
            width: 140px;
            height: 140px;
            background: radial-gradient(circle, rgba(239, 68, 68, 0.2) 0%, rgba(239, 68, 68, 0) 70%);
            border-radius: 50%;
            top: 55%;
            left: 60%;
            transform: translate(-50%, -50%);
            z-index: 1;
        }

        /* 4. Watermark Logo */
        .watermark-logo {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 200px;
            opacity: 0.05;
            pointer-events: none;
            z-index: 0;
        }

        /* --- Elements --- */
        .chip-gold {
            background: linear-gradient(135deg, #eab308 0%, #fef08a 50%, #ca8a04 100%);
            border: 1px solid #a16207;
            border-radius: 4px;
            box-shadow: inset 0 0 2px rgba(0,0,0,0.2);
        }
        .chip-line {
            border: 1px solid #854d0e;
            opacity: 0.6;
        }

        .ghost-photo {
            mix-blend-mode: multiply;
            opacity: 0.3;
            filter: grayscale(100%) contrast(120%);
        }
        
        .signature-blend {
            mix-blend-mode: multiply;
            filter: contrast(150%);
        }

        /* Back Side Barcode Strip */
        .barcode-strip {
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAACCAYAAAB/qH1jAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH5QsOFSQ4y7FzHQAAAB1JREFUCNdjYGBgYGQwMTEwMTAwMDAw/P/PwIAKAACAOQYDB9g0fwAAAABJRU5ErkJggg=='); /* Pixel pattern */
            image-rendering: pixelated;
            opacity: 0.8;
        }

        /* Shapla Icon styling */
        .shapla-icon {
            fill: #db2777; /* Pinkish red */
            opacity: 0.8;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col">

    <nav class="bg-blue-900 text-white shadow-md sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4">
            <div class="flex justify-between items-center h-16">
                <a href="/" class="font-bold text-xl flex items-center gap-2">
                    <span class="bg-white text-blue-900 px-2 py-1 rounded">Uni</span>NID
                </a>
                <div class="hidden md:flex space-x-6 items-center">
                    <a href="/" class="hover:text-blue-300 transition">Home</a>
                    <a href="/nid" class="text-blue-300 font-bold border-b-2 border-blue-300">NID Maker</a>
                    <a href="/drive" class="hover:text-blue-300 transition">Driving License</a>
                    <a href="/cc-gen" class="hover:text-blue-300 transition">CC Gen</a>
                    <a href="/signature" class="hover:text-blue-300 transition">Signature</a>
                </div>
                <a href="https://t.me/drkingbd" target="_blank" class="bg-blue-500 hover:bg-blue-600 text-white text-sm font-bold py-2 px-4 rounded-full transition flex items-center gap-2">
                    Telegram
                </a>
            </div>
            <div class="md:hidden flex space-x-4 overflow-x-auto pb-3 text-sm whitespace-nowrap px-4">
                <a href="/" class="hover:text-blue-300">Home</a>
                <a href="/nid" class="font-bold text-blue-300">NID Maker</a>
                <a href="/cc-gen" class="hover:text-blue-300">CC Gen</a>
            </div>
        </div>
    </nav>

    <div class="flex-grow p-4 md:p-6">
        <div class="max-w-7xl mx-auto grid grid-cols-1 xl:grid-cols-12 gap-8">
            
            <div class="xl:col-span-5 bg-white p-6 rounded-xl shadow-lg h-fit">
                <h2 class="text-2xl font-bold mb-4 text-gray-800 border-b pb-2">Citizen Information</h2>
                
                <div class="space-y-3">
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Name (Bangla)</label>
                        <input type="text" id="inNameBn" value="আব্দুল কাদের" class="font-bn w-full border rounded p-2 text-sm focus:ring-1 focus:ring-blue-500" oninput="updateCard()">
                    </div>
                    <div>
                        <label class="text-xs font-semibold text-gray-500 uppercase">Name (English)</label>
                        <input type="text" id="inNameEn" value="ABDUL QUADER" class="w-full border rounded p-2 text-sm uppercase focus:ring-1 focus:ring-blue-500" oninput="updateCard()">
                    </div>
                    
                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Father (Bangla)</label>
                            <input type="text" id="inFather" value="ফায়াজ এফাজ" class="font-bn w-full border rounded p-2 text-sm" oninput="updateCard()">
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Mother (Bangla)</label>
                            <input type="text" id="inMother" value="সুমাইয়া রিহা" class="font-bn w-full border rounded p-2 text-sm" oninput="updateCard()">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-2">
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Date of Birth</label>
                            <input type="text" id="inDob" value="02 Jan 2000" placeholder="DD Mon YYYY" class="w-full border rounded p-2 text-sm" oninput="updateCard()">
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">NID No (10 Digits)</label>
                            <input type="text" id="inNid" value="3688993675" maxlength="17" class="w-full border rounded p-2 text-sm" oninput="updateCard()">
                        </div>
                    </div>

                    <div class="pt-2 border-t mt-4 bg-gray-50 p-2 rounded">
                        <label class="text-xs font-bold text-blue-700 uppercase mb-2 block">Back Side Details</label>
                        
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Address (Bangla)</label>
                            <textarea id="inAddress" rows="2" class="font-bn w-full border rounded p-2 text-sm" oninput="updateCard()">বাসা/হোল্ডিং: ০০৫৩, গ্রাম/রাস্তা: কুমিল্লা, ডাকঘর: ৩৫০০, চট্টগ্রাম বিভাগ, ৫৪ কুমিল্লা সদর</textarea>
                        </div>

                        <div class="grid grid-cols-3 gap-2 mt-2">
                            <div>
                                <label class="text-xs font-semibold text-gray-500 uppercase">Blood</label>
                                <input type="text" id="inBlood" value="A+" class="w-full border rounded p-2 text-sm" oninput="updateCard()">
                            </div>
                             <div class="col-span-2">
                                <label class="text-xs font-semibold text-gray-500 uppercase">Place of Birth</label>
                                <input type="text" id="inPob" value="Cumilla" class="w-full border rounded p-2 text-sm" oninput="updateCard()">
                            </div>
                        </div>
                        <div class="mt-2">
                             <label class="text-xs font-semibold text-gray-500 uppercase">Issue Date</label>
                             <input type="text" id="inIssue" value="07 Jan 2017" class="w-full border rounded p-2 text-sm" oninput="updateCard()">
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-2 pt-2 border-t mt-2">
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Your Photo</label>
                            <input type="file" id="inputPhoto" accept="image/*" class="w-full text-xs border rounded p-1 bg-gray-50" onchange="loadImage(this, ['imgPhoto', 'imgGhost'])">
                        </div>
                        <div>
                            <label class="text-xs font-semibold text-gray-500 uppercase">Your Signature</label>
                            <input type="file" id="inputSign" accept="image/*" class="w-full text-xs border rounded p-1 bg-gray-50" onchange="loadImage(this, ['imgSign'])">
                        </div>
                    </div>

                    <div class="flex gap-3 mt-6">
                        <button onclick="downloadSide('frontCard')" class="flex-1 bg-green-600 hover:bg-green-700 text-white font-bold py-3 rounded-lg transition shadow-md flex justify-center gap-2 text-sm items-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                            Front
                        </button>
                        <button onclick="downloadSide('backCard')" class="flex-1 bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 rounded-lg transition shadow-md flex justify-center gap-2 text-sm items-center">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path></svg>
                            Back
                        </button>
                    </div>
                </div>
            </div>

            <div class="xl:col-span-7 flex flex-col items-center gap-6 pt-4">
                
                <div class="w-full flex flex-col items-center">
                    <div class="flex justify-between w-full max-w-[460px] mb-1">
                        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider">Front Side</h3>
                    </div>
                    
                    <div id="frontCard" class="nid-card">
                        <div class="nid-bg-waves"></div>
                        <div class="nid-guilloche"></div>
                        <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" class="watermark-logo">
                        <div class="bg-sun-red"></div>

                        <div class="relative z-10 flex pt-3 pl-4 pr-4">
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/8/84/Government_Seal_of_Bangladesh.svg/1200px-Government_Seal_of_Bangladesh.svg.png" class="w-10 h-10 object-contain mt-1 drop-shadow-sm">
                            
                            <div class="flex-grow text-center">
                                <h1 class="font-bn font-bold text-lg leading-none text-gray-900">গণপ্রজাতন্ত্রী বাংলাদেশ সরকার</h1>
                                <h2 class="text-[10px] text-green-700 font-medium tracking-tight mt-0.5">Government of the People's Republic of Bangladesh</h2>
                                <div class="flex justify-center items-center gap-2 mt-0.5">
                                    <h3 class="font-bn text-xs font-bold text-gray-800">জাতীয় পরিচয়পত্র</h3>
                                    <span class="text-red-600 font-bold text-xs">/</span>
                                    <h3 class="text-[11px] font-bold text-red-600 uppercase tracking-wide">National ID Card</h3>
                                </div>
                            </div>

                            <div class="absolute top-9 right-3 text-[9px] text-gray-600 font-medium">
                                <span id="outDobShort">02 Jan 2000</span>
                            </div>
                        </div>

                        <div class="relative z-10 flex mt-2 pl-5">
                            <div class="flex flex-col items-center w-[100px] mr-4">
                                <div class="w-[95px] h-[110px] bg-gray-200 rounded border border-gray-300 overflow-hidden shadow-sm">
                                    <img id="imgPhoto" src="https://via.placeholder.com/150" class="w-full h-full object-cover">
                                </div>
                                <div class="mt-1 w-full flex justify-center">
                                    <img id="imgSign" src="https://via.placeholder.com/150x50?text=Signature" class="h-8 object-contain signature-blend">
                                </div>
                            </div>

                            <div class="flex-grow relative pt-1">
                                <div class="absolute right-2 top-2 w-24 h-24 overflow-hidden rounded-full opacity-20 pointer-events-none">
                                     <img id="imgGhost" src="https://via.placeholder.com/150" class="w-full h-full object-cover ghost-photo">
                                </div>

                                <div class="space-y-[2px] relative z-20">
                                    <div>
                                        <p class="font-bn text-[10px] text-gray-600">নাম</p>
                                        <p id="outNameBn" class="font-bn text-[15px] font-bold text-black leading-4">আব্দুল কাদের</p>
                                    </div>
                                    <div>
                                        <p class="text-[9px] text-gray-600">Name</p>
                                        <p id="outNameEn" class="text-[12px] font-bold text-black uppercase leading-4 tracking-wide">ABDUL QUADER</p>
                                    </div>
                                    <div class="pt-1">
                                        <p class="font-bn text-[10px] text-gray-600">পিতা</p>
                                        <p id="outFather" class="font-bn text-[12px] text-gray-800 leading-3">ফায়াজ এফাজ</p>
                                    </div>
                                    <div>
                                        <p class="font-bn text-[10px] text-gray-600">মাতা</p>
                                        <p id="outMother" class="font-bn text-[12px] text-gray-800 leading-3">সুমাইয়া রিহা</p>
                                    </div>
                                    
                                    <div class="flex items-end gap-6 pt-2">
                                        <div>
                                            <p class="text-[9px] text-gray-600">Date of Birth</p>
                                            <p id="outDob" class="text-[12px] font-bold text-red-600 tracking-wide">02 Jan 2000</p>
                                        </div>
                                        <div>
                                            <p class="text-[9px] text-gray-600">NID No.</p>
                                            <p id="outNid" class="text-[14px] font-bold text-blue-900 tracking-widest">3688993675</p>
                                        </div>
                                    </div>
                                </div>

                                <div class="absolute right-3 top-16 w-11 h-9 chip-gold grid grid-cols-2 gap-1 p-1 z-30 shadow-md">
                                    <div class="rounded-[2px] border border-[#854d0e] bg-[#fcd34d]"></div>
                                    <div class="rounded-[2px] border border-[#854d0e] bg-[#fcd34d]"></div>
                                    <div class="rounded-[2px] border border-[#854d0e] bg-[#fcd34d]"></div>
                                    <div class="rounded-[2px] border border-[#854d0e] bg-[#fcd34d]"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="w-full flex flex-col items-center">
                    <div class="flex justify-between w-full max-w-[460px] mb-1">
                        <h3 class="text-xs font-bold text-gray-400 uppercase tracking-wider">Back Side</h3>
                    </div>

                    <div id="backCard" class="nid-card bg-white">
                        <div class="nid-bg-waves opacity-50"></div>

                        <div class="relative z-10 w-full h-12 bg-white border-b border-gray-200 flex items-center justify-center overflow-hidden mt-3 px-4 shadow-sm">
                            <div class="w-full h-full barcode-strip"></div>
                        </div>

                        <div class="relative z-10 px-4 py-3 text-[11px] leading-tight">
                            <p class="font-bn text-gray-800">
                                <span class="font-bold">ঠিকানা:</span> 
                                <span id="outAddress">বাসা/হোল্ডিং: ০০৫৩, গ্রাম/রাস্তা: কুমিল্লা, ডাকঘর: ৩৫০০, চট্টগ্রাম বিভাগ, ৫৪ কুমিল্লা সদর</span>
                            </p>
                        </div>

                        <div class="relative z-10 px-4 flex justify-between items-center text-[10px] font-bold text-gray-700 mt-1">
                            <div class="flex flex-col">
                                <span class="text-[9px] font-normal text-gray-500">Blood Group</span>
                                <span id="outBlood" class="text-red-600 text-xs">A+</span>
                            </div>
                            <div class="flex flex-col">
                                <span class="text-[9px] font-normal text-gray-500">Place of Birth</span>
                                <span id="outPob" class="text-black text-xs">Cumilla</span>
                            </div>
                            <div class="flex flex-col text-right">
                                <span class="text-[9px] font-normal text-gray-500">Issue Date</span>
                                <span id="outIssue" class="text-black text-xs">07 Jan 2017</span>
                            </div>
                        </div>

                        <div class="absolute right-4 top-24 w-12 h-12 z-0">
                            <svg class="shapla-icon" viewBox="0 0 512 512">
                                <path d="M256 0C150 0 150 100 150 100C150 100 100 150 100 200C100 250 150 280 256 350C362 280 412 250 412 200C412 150 362 100 362 100C362 100 362 0 256 0Z" />
                            </svg>
                        </div>

                        <div class="absolute bottom-4 left-4 right-4 z-20">
                            <div class="font-mrz text-[12px] leading-[14px] text-gray-800 tracking-widest">
                                <p id="mrz1">I&lt;BGD368899367&lt;55&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</p>
                                <p id="mrz2">0001027M4919619BGD&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;1</p>
                                <p id="mrz3">QUADER&lt;&lt;ABDUL&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;</p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>

    <footer class="bg-white border-t mt-8 py-6 text-center">
        <p class="text-gray-600 font-bold">© 2025 UniCard Maker</p>
        <p class="text-xs text-gray-400 mt-1">Generated cards are for educational and preview purposes only.</p>
    </footer>

    <script>
        function updateCard() {
            // Get Values
            const nameBn = document.getElementById('inNameBn').value;
            const nameEn = document.getElementById('inNameEn').value;
            const father = document.getElementById('inFather').value;
            const mother = document.getElementById('inMother').value;
            const dob = document.getElementById('inDob').value;
            const nid = document.getElementById('inNid').value;
            
            const address = document.getElementById('inAddress').value;
            const blood = document.getElementById('inBlood').value;
            const pob = document.getElementById('inPob').value;
            const issue = document.getElementById('inIssue').value;

            // Map to Front
            document.getElementById('outNameBn').innerText = nameBn;
            document.getElementById('outNameEn').innerText = nameEn;
            document.getElementById('outFather').innerText = father;
            document.getElementById('outMother').innerText = mother;
            document.getElementById('outDob').innerText = dob;
            document.getElementById('outDobShort').innerText = dob; // Top right date
            document.getElementById('outNid').innerText = nid;

            // Map to Back
            document.getElementById('outAddress').innerText = address;
            document.getElementById('outBlood').innerText = blood;
            document.getElementById('outPob').innerText = pob;
            document.getElementById('outIssue').innerText = issue;

            generateMRZ(nameEn, nid, dob, issue);
        }

        function loadImage(input, targetIds) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    targetIds.forEach(id => {
                        document.getElementById(id).src = e.target.result;
                    });
                };
                reader.readAsDataURL(input.files[0]);
            }
        }

        // MRZ Generator Logic (TD1 Format - 3 Lines)
        function generateMRZ(name, nid, dobStr, issueStr) {
            // 1. Parse Name (Surname<<GivenNames)
            // Simple split assumption: Last word is surname? Or First? 
            // Standard NID usually: FIRSTNAME<<LASTNAME. Let's just replace spaces with <<
            let mrzName = name.toUpperCase().replace(/[^A-Z0-9]/g, '<').replace(/\s+/g, '<<');
            // Ensure valid chars
            
            // 2. Parse DOB (YYMMDD)
            let dobMrz = "000101"; // Default
            try {
                let d = new Date(dobStr);
                if(!isNaN(d)) {
                    let yy = String(d.getFullYear()).slice(-2);
                    let mm = String(d.getMonth() + 1).padStart(2, '0');
                    let dd = String(d.getDate()).padStart(2, '0');
                    dobMrz = yy + mm + dd;
                }
            } catch(e){}

            // 3. Parse Expiry (Issue + 10 years usually)
            let expMrz = "300101"; // Default
            try {
                let d = new Date(issueStr);
                if(!isNaN(d)) {
                    d.setFullYear(d.getFullYear() + 10); // 10 year validity
                    let yy = String(d.getFullYear()).slice(-2);
                    let mm = String(d.getMonth() + 1).padStart(2, '0');
                    let dd = String(d.getDate()).padStart(2, '0');
                    expMrz = yy + mm + dd;
                }
            } catch(e){}

            // 4. Format NID (Usually 10 digits)
            let cleanNid = nid.replace(/[^0-9]/g, '').substring(0, 10); 
            
            // Construct Lines (Length 30 chars for TD1)
            
            // Line 1: I<BGD[NID 9 chars]<[CheckDigit]<<<<<<<<<<<<<
            // Image shows: I<BGD368899367<55<<<<<<<<<<<<<
            // We will mimic the structure: I<BGD + NID(9) + < + Random/Check + padding
            let line1 = `I<BGD${cleanNid.padEnd(9, '<').substring(0,9)}<55`;
            line1 = line1.padEnd(30, '<');

            // Line 2: [DOB 6] + [Check] + [Sex 1] + [Expiry 6] + [Check] + [Nationality 3] + [Optional]
            // Image: 0001027M4919619BGD<<<<<<<<<<<1
            // Using fixed Male (M) for now or random logic
            let line2 = `${dobMrz}7M${expMrz}9BGD`;
            line2 = line2.padEnd(29, '<') + '1';

            // Line 3: Name
            let line3 = mrzName.substring(0, 30).padEnd(30, '<');

            document.getElementById('mrz1').innerText = line1;
            document.getElementById('mrz2').innerText = line2;
            document.getElementById('mrz3').innerText = line3;
        }

        function downloadSide(elementId) {
            const element = document.getElementById(elementId);
            html2canvas(element, {
                scale: 3, // High Res
                backgroundColor: null, // Transparent boundary
                useCORS: true
            }).then(canvas => {
                const link = document.createElement('a');
                link.download = `Smart_NID_${elementId}.png`;
                link.href = canvas.toDataURL("image/png");
                link.click();
            });
        }

        // Initialize
        updateCard();
    </script>
</body>
</html>
